# 🚨 正しいウェブアプリURLの取得方法

## 問題
提供されたURL（`https://script.google.com/macros/library/d/...`）は**ライブラリURL**です。
データ送信には**ウェブアプリのデプロイURL**が必要です。

## 正しいURLの取得手順

### 1. Google Apps Scriptエディタを開く

### 2. デプロイ → デプロイを管理

### 3. ウェブアプリのURLを確認
- **ウェブアプリ**のセクションを探す
- URLは以下の形式：
  ```
  https://script.google.com/macros/s/【デプロイID】/exec
  ```

### 4. 正しいURLの見分け方
- ✅ 正しい: `/macros/s/` を含む
- ❌ 間違い: `/macros/library/d/` を含む

## 新しくウェブアプリをデプロイする場合

### 1. デプロイ → 新しいデプロイ

### 2. 設定
- **種類の選択**：歯車アイコン → **ウェブアプリ**
- **説明**：任意（例：AI診断ツール データ保存）
- **実行ユーザー**：自分
- **アクセスできるユーザー**：全員

### 3. デプロイをクリック

### 4. 表示されるURLをコピー
```
https://script.google.com/macros/s/AKfycb.../exec
```

## URLの使用方法

### 1. `.env`ファイルを更新
```
VITE_SAVE_ENDPOINT=https://script.google.com/macros/s/新しいデプロイID/exec
```

### 2. 開発サーバーを再起動
```bash
# Ctrl+C で停止してから
npm run dev
```

## 確認方法

ブラウザで直接URLにアクセスして、以下のレスポンスが返ることを確認：
```json
{"status":"ok","message":"Working!"}
```

## トラブルシューティング

### 「スクリプトが見つかりません」エラー
- URLが間違っています
- 正しいウェブアプリのURLを使用してください

### 「承認が必要です」エラー
- 初回アクセス時は承認が必要
- Googleアカウントでログインして承認

### アクセス権限エラー
- デプロイ設定で「アクセスできるユーザー：全員」になっているか確認